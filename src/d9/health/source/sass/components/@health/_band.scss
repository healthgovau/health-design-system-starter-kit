.health-band {

  h2+.health-layout {
    @include AU-space(margin-top, 2.5unit);
  }
}

// Band types and colours

/**
 * Markup:
 * <div class="health-band health-band--MODIFIERS"> - This div doesn't style the band.
 *   <div class="health-band__container"> - This div styles the contained band. This is included to permit stacking.
 *     BAND CONTENT
 *   </div>::before - This pseudo-class styles the full width band.
 * </div>
 */

// Make band mixin
@mixin make-band($variant, $colour1: null, $colour2: null) {
  &.health-band--#{$variant} {

    .health-band__container,
    &.health-band--full-width-bg::before {
      @if $colour1 and $colour2 {
        @include background-style(var(--#{$colour1}), var(--#{$colour2}));
      }

      @else {
        @include background-style(var(--#{$colour1}));
      }
    }

    &.health-band--full-width-bg {
      .health-band__container {
        background: none;
      }
    }
  }
}

.au-body {
  .health-band {

    // TODO Add adjacent selector handling so that stacked bands don't double the margin
    position: relative; // reqd for inner container behaviour
    isolation: isolate;
    background: none !important; // Remove as applies to container to allow layer management
    background-color: none !important;
    padding: 0 !important;
    @include AU-space(margin, 1.5unit 0);


    // Types/layouts
    // Contained band (default)
    &[class*="health-band--"] {
      .health-band__container {
        @include AU-space(padding, 2unit);
        border-radius: 6px;
      }
    }

    // Full width background setup
    &.health-band--full-width-bg {
      @include AU-space(margin, 0);

      // Apply full width background
      // No default colour specified. Do it for each band colour.
      &::before {
        content: "";
        position: absolute;
        inset: 0;
        width: 100vw;
        margin-inline-start: 50%;
        transform: translatex(-50%);
        display: inherit;
        z-index: -1;
      }

      .health-band__container {
        @include AU-space(padding, 2unit 0);
      }
    }

    // Everything goes full-width
    // TODO fix horizontal scrolling
    &.health-band--full-width {
      width: 100vw;
      margin-inline-start: 50%;
      transform: translateX(-50%);
    }

    // Colours are declared in _colours-map.scss as CSS vars

    // Make band variants via mixin args: variant-name, start colour, end colour (opt)
    @include make-band("primary", "primary", "primary-alt");
    @include make-band("secondary", "secondary", "secondary-alt");
    @include make-band("tertiary", "tertiary", "tertiary-alt");
    @include make-band("tertiary-2", "tertiary-2-alt", "tertiary-2-alt");
    @include make-band("primary", "primary", "primary-alt");
    @include make-band("neutral", "neutral");

  }
}